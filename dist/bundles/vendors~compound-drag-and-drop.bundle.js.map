{"version":3,"sources":["webpack:///./node_modules/cytoscape-compound-drag-and-drop/cytoscape-compound-drag-and-drop.js"],"names":["factory","modules","installedModules","__webpack_require__","moduleId","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","assign","defaults","toggle","listeners","DragAndDrop","cy","options","this","enabled","addListeners","destroy","removeListeners","forEach","def","bind","tgt","_len","arguments","length","srcs","Array","_key","filter","src","keys","k","grabbedNode","node","dropTarget","dropSibling","newParentNode","overThreshold","outThreshold","_require","isParent","isChild","isOnlyChild","getBounds","getBoundsTuple","boundsOverlap","expandBounds","getBoundsCopy","setParent","removeParent","addListener","event","selector","callback","push","on","_this","canBeGrabbed","selected","elements","isMultiplySelected","canBeInBoundsTuple","same","canBeDropTarget","canBeDropSibling","updateBoundsTuples","boundsTuples","nodes","map","reset","removeClass","collection","dropTargetBounds","inGesture","e","target","parent","addClass","emit","newNode","rmedNode","rmedIsTarget","rmedIsSibling","rmedIsGrabbed","nonempty","bb","sibling","rmFromParent","grabbedIsOnlyChild","remove","_bb","overlappingNodes","t","removed","overlappingParents","_parent","_sibling","add","lis","removeListener","enable","disable","boundingBox","includeOverlays","copyBounds","x1","x2","y1","y2","w","h","children","bb1","bb2","padding","move","id","impl","register","cytoscape"],"mappings":"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","file":"bundles/vendors~compound-drag-and-drop.bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cytoscapeCompoundDragAndDrop\"] = factory();\n\telse\n\t\troot[\"cytoscapeCompoundDragAndDrop\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 6);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar assign = __webpack_require__(1);\nvar defaults = __webpack_require__(2);\nvar toggle = __webpack_require__(4);\nvar listeners = __webpack_require__(3);\n\nvar DragAndDrop = function DragAndDrop(cy, options) {\n  this.cy = cy;\n  this.options = assign({}, defaults, options);\n  this.listeners = [];\n  this.enabled = true;\n\n  this.addListeners();\n};\n\nvar destroy = function destroy() {\n  this.removeListeners();\n};\n\n[toggle, listeners, { destroy: destroy }].forEach(function (def) {\n  assign(DragAndDrop.prototype, def);\n});\n\nmodule.exports = function (options) {\n  var cy = this;\n\n  return new DragAndDrop(cy, options);\n};\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n// Simple, internal Object.assign() polyfill for options objects etc.\n\nmodule.exports = Object.assign != null ? Object.assign.bind(Object) : function (tgt) {\n  for (var _len = arguments.length, srcs = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    srcs[_key - 1] = arguments[_key];\n  }\n\n  srcs.filter(function (src) {\n    return src != null;\n  }).forEach(function (src) {\n    Object.keys(src).forEach(function (k) {\n      return tgt[k] = src[k];\n    });\n  });\n\n  return tgt;\n};\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/* eslint-disable no-unused-vars */\n\nmodule.exports = {\n  grabbedNode: function grabbedNode(node) {\n    return true;\n  }, // filter function to specify which nodes are valid to grab and drop into other nodes\n  dropTarget: function dropTarget(node) {\n    return true;\n  }, // filter function to specify which parent nodes are valid drop targets\n  dropSibling: function dropSibling(node) {\n    return true;\n  }, // filter function to specify which orphan nodes are valid drop siblings\n  newParentNode: function newParentNode(grabbedNode, dropSibling) {\n    return {};\n  }, // specifies element json for parent nodes added by dropping an orphan node on another orphan (a drop sibling)\n  overThreshold: 10, // make dragging over a drop target easier by expanding the hit area by this amount on all sides\n  outThreshold: 10 // make dragging out of a drop target a bit harder by expanding the hit area by this amount on all sides\n};\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _require = __webpack_require__(5),\n    isParent = _require.isParent,\n    isChild = _require.isChild,\n    isOnlyChild = _require.isOnlyChild,\n    getBounds = _require.getBounds,\n    getBoundsTuple = _require.getBoundsTuple,\n    boundsOverlap = _require.boundsOverlap,\n    expandBounds = _require.expandBounds,\n    getBoundsCopy = _require.getBoundsCopy,\n    setParent = _require.setParent,\n    removeParent = _require.removeParent;\n\nvar addListener = function addListener(event, selector, callback) {\n  this.listeners.push({ event: event, selector: selector, callback: callback });\n\n  if (selector == null) {\n    this.cy.on(event, callback);\n  } else {\n    this.cy.on(event, selector, callback);\n  }\n};\n\nvar addListeners = function addListeners() {\n  var _this = this;\n\n  var options = this.options,\n      cy = this.cy;\n\n\n  var isMultiplySelected = function isMultiplySelected(n) {\n    return n.selected() && cy.elements('node:selected').length > 1;\n  };\n  var canBeGrabbed = function canBeGrabbed(n) {\n    return !isParent(n) && !isMultiplySelected(n) && options.grabbedNode(n);\n  };\n  var canBeDropTarget = function canBeDropTarget(n) {\n    return !isChild(n) && !n.same(_this.grabbedNode) && options.dropTarget(n);\n  };\n  var canBeDropSibling = function canBeDropSibling(n) {\n    return isChild(n) && !n.same(_this.grabbedNode) && options.dropSibling(n);\n  };\n  var canPullFromParent = function canPullFromParent(n) {\n    return isChild(n);\n  };\n  var canBeInBoundsTuple = function canBeInBoundsTuple(n) {\n    return (canBeDropTarget(n) || canBeDropSibling(n)) && !n.same(_this.dropTarget);\n  };\n  var updateBoundsTuples = function updateBoundsTuples() {\n    return _this.boundsTuples = cy.nodes(canBeInBoundsTuple).map(getBoundsTuple);\n  };\n\n  var reset = function reset() {\n    _this.grabbedNode.removeClass('cdnd-grabbed-node');\n    _this.dropTarget.removeClass('cdnd-drop-target');\n    _this.dropSibling.removeClass('cdnd-drop-sibling');\n\n    _this.grabbedNode = cy.collection();\n    _this.dropTarget = cy.collection();\n    _this.dropSibling = cy.collection();\n    _this.dropTargetBounds = null;\n    _this.boundsTuples = [];\n    _this.inGesture = false;\n  };\n\n  this.addListener('grab', 'node', function (e) {\n    var node = e.target;\n\n    if (!_this.enabled || !canBeGrabbed(node)) {\n      return;\n    }\n\n    _this.inGesture = true;\n    _this.grabbedNode = node;\n    _this.dropTarget = cy.collection();\n    _this.dropSibling = cy.collection();\n\n    if (canPullFromParent(node)) {\n      _this.dropTarget = node.parent();\n      _this.dropTargetBounds = getBoundsCopy(_this.dropTarget);\n    }\n\n    updateBoundsTuples();\n\n    _this.grabbedNode.addClass('cdnd-grabbed-node');\n    _this.dropTarget.addClass('cdnd-drop-target');\n\n    node.emit('cdndgrab');\n  });\n\n  this.addListener('add', 'node', function (e) {\n    if (!_this.inGesture || !_this.enabled) {\n      return;\n    }\n\n    var newNode = e.target;\n\n    if (canBeInBoundsTuple(newNode)) {\n      _this.boundsTuples.push(getBoundsTuple(newNode));\n    }\n  });\n\n  this.addListener('remove', 'node', function (e) {\n    if (!_this.inGesture || !_this.enabled) {\n      return;\n    }\n\n    var rmedNode = e.target;\n    var rmedIsTarget = rmedNode.same(_this.dropTarget);\n    var rmedIsSibling = rmedNode.same(_this.dropSibling);\n    var rmedIsGrabbed = rmedNode.same(_this.grabbedNode);\n\n    // try to clean things up if one of the drop nodes is removed\n    if (rmedIsTarget || rmedIsSibling || rmedIsGrabbed) {\n      if (rmedIsGrabbed) {\n        reset();\n      } else {\n        _this.dropTarget = cy.collection();\n        _this.dropSibling = cy.collection();\n\n        updateBoundsTuples();\n      }\n    }\n  });\n\n  this.addListener('drag', 'node', function () {\n    if (!_this.inGesture || !_this.enabled) {\n      return;\n    }\n\n    if (_this.dropTarget.nonempty()) {\n      // already in a parent\n      var bb = expandBounds(getBounds(_this.grabbedNode), options.outThreshold);\n      var parent = _this.dropTarget;\n      var sibling = _this.dropSibling;\n      var rmFromParent = !boundsOverlap(_this.dropTargetBounds, bb);\n      var grabbedIsOnlyChild = isOnlyChild(_this.grabbedNode);\n\n      if (rmFromParent) {\n        removeParent(_this.grabbedNode);\n        removeParent(_this.dropSibling);\n\n        _this.dropTarget.removeClass('cdnd-drop-target');\n        _this.dropSibling.removeClass('cdnd-drop-sibling');\n\n        if (_this.dropSibling.nonempty() // remove extension-created parents on out\n        || grabbedIsOnlyChild // remove empty parents\n        ) {\n            _this.dropTarget.remove();\n          }\n\n        _this.dropTarget = cy.collection();\n        _this.dropSibling = cy.collection();\n        _this.dropTargetBounds = null;\n\n        updateBoundsTuples();\n\n        _this.grabbedNode.emit('cdndout', [parent, sibling]);\n      }\n    } else {\n      // not in a parent\n      var _bb = expandBounds(getBounds(_this.grabbedNode), options.overThreshold);\n      var tupleOverlaps = function tupleOverlaps(t) {\n        return !t.node.removed() && boundsOverlap(_bb, t.bb);\n      };\n      var overlappingNodes = _this.boundsTuples.filter(tupleOverlaps).map(function (t) {\n        return t.node;\n      });\n\n      if (overlappingNodes.length > 0) {\n        // potential parent\n        var overlappingParents = overlappingNodes.filter(isParent);\n        var _parent = void 0,\n            _sibling = void 0;\n\n        if (overlappingParents.length > 0) {\n          _sibling = cy.collection();\n          _parent = overlappingParents[0]; // TODO maybe use a metric here to select which one\n        } else {\n          _sibling = overlappingNodes[0]; // TODO maybe use a metric here to select which one\n          _parent = cy.add(options.newParentNode(_this.grabbedNode, _sibling));\n        }\n\n        _parent.addClass('cdnd-drop-target');\n        _sibling.addClass('cdnd-drop-sibling');\n\n        setParent(_sibling, _parent);\n\n        _this.dropTargetBounds = getBoundsCopy(_parent);\n\n        setParent(_this.grabbedNode, _parent);\n\n        _this.dropTarget = _parent;\n        _this.dropSibling = _sibling;\n\n        _this.grabbedNode.emit('cdndover', [_parent, _sibling]);\n      }\n    }\n  });\n\n  this.addListener('free', 'node', function () {\n    if (!_this.inGesture || !_this.enabled) {\n      return;\n    }\n\n    var grabbedNode = _this.grabbedNode,\n        dropTarget = _this.dropTarget,\n        dropSibling = _this.dropSibling;\n\n\n    reset();\n\n    grabbedNode.emit('cdnddrop', [dropTarget, dropSibling]);\n  });\n};\n\nvar removeListeners = function removeListeners() {\n  var cy = this.cy;\n\n\n  this.listeners.forEach(function (lis) {\n    var event = lis.event,\n        selector = lis.selector,\n        callback = lis.callback;\n\n\n    if (selector == null) {\n      cy.removeListener(event, callback);\n    } else {\n      cy.removeListener(event, selector, callback);\n    }\n  });\n\n  this.listeners = [];\n};\n\nmodule.exports = { addListener: addListener, addListeners: addListeners, removeListeners: removeListeners };\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nfunction enable() {\n  this.enabled = true;\n}\n\nfunction disable() {\n  this.enabled = false;\n}\n\nmodule.exports = { enable: enable, disable: disable };\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar isParent = function isParent(n) {\n  return n.isParent();\n};\nvar isChild = function isChild(n) {\n  return n.isChild();\n};\nvar isOnlyChild = function isOnlyChild(n) {\n  return isChild(n) && n.parent().children().length === 1;\n};\n\nvar getBounds = function getBounds(n) {\n  return n.boundingBox({ includeOverlays: false });\n};\nvar getBoundsTuple = function getBoundsTuple(n) {\n  return { node: n, bb: copyBounds(getBounds(n)) };\n};\nvar copyBounds = function copyBounds(bb) {\n  return { x1: bb.x1, x2: bb.x2, y1: bb.y1, y2: bb.y2, w: bb.w, h: bb.h };\n};\nvar getBoundsCopy = function getBoundsCopy(n) {\n  return copyBounds(getBounds(n));\n};\n\nvar removeParent = function removeParent(n) {\n  return n.move({ parent: null });\n};\nvar setParent = function setParent(n, parent) {\n  return n.move({ parent: parent.id() });\n};\n\nvar boundsOverlap = function boundsOverlap(bb1, bb2) {\n  // case: one bb to right of other\n  if (bb1.x1 > bb2.x2) {\n    return false;\n  }\n  if (bb2.x1 > bb1.x2) {\n    return false;\n  }\n\n  // case: one bb to left of other\n  if (bb1.x2 < bb2.x1) {\n    return false;\n  }\n  if (bb2.x2 < bb1.x1) {\n    return false;\n  }\n\n  // case: one bb above other\n  if (bb1.y2 < bb2.y1) {\n    return false;\n  }\n  if (bb2.y2 < bb1.y1) {\n    return false;\n  }\n\n  // case: one bb below other\n  if (bb1.y1 > bb2.y2) {\n    return false;\n  }\n  if (bb2.y1 > bb1.y2) {\n    return false;\n  }\n\n  // otherwise, must have some overlap\n  return true;\n};\n\nvar expandBounds = function expandBounds(bb, padding) {\n  return {\n    x1: bb.x1 - padding,\n    x2: bb.x2 + padding,\n    w: bb.w + 2 * padding,\n    y1: bb.y1 - padding,\n    y2: bb.y2 + padding,\n    h: bb.h + 2 * padding\n  };\n};\n\nmodule.exports = {\n  isParent: isParent, isChild: isChild, isOnlyChild: isOnlyChild,\n  getBoundsTuple: getBoundsTuple, boundsOverlap: boundsOverlap, getBounds: getBounds, expandBounds: expandBounds, copyBounds: copyBounds, getBoundsCopy: getBoundsCopy,\n  removeParent: removeParent, setParent: setParent\n};\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar impl = __webpack_require__(0);\n\n// registers the extension on a cytoscape lib ref\nvar register = function register(cytoscape) {\n  if (!cytoscape) {\n    return;\n  } // can't register if cytoscape unspecified\n\n  cytoscape('core', 'compoundDragAndDrop', impl); // register with cytoscape.js\n};\n\nif (typeof cytoscape !== 'undefined') {\n  // expose to global cytoscape (i.e. window.cytoscape)\n  register(cytoscape);\n}\n\nmodule.exports = register;\n\n/***/ })\n/******/ ]);\n});"],"sourceRoot":""}